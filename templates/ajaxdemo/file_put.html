<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>文件上传</title>
    <script type="application/javascript" src="/statics/jquery-3.4.1.js"></script>
</head>
<body>
<h3>简单的form</h3>
<form action="" method="post" enctype="application/x-www-form-urlencoded">
    用户名 <input type="text" name="user">
    密码  <input type="password" name="pwd">
    <input type="submit">
</form>
<hr>
<h3>基于form表单的文件上传</h3>
<form action="" enctype="multipart/form-data" method="post">
    {#    enctype 上传文件#}
    用户名 <input type="text" name="user">
    头像 <input type="file" name="avatar">
    <input type="submit">
</form>
<hr>
<h3>基于Ajax文件上传</h3>
<form action="" method="post">
    用户名 <input type="text" id="user">
    头像  <input type="file" id="avatar">
    <input type="button" class="btn" value="Ajax">
</form>

<script type="application/javascript">
    {#$(".btn").click(function () {#}
    {#    $.ajax({#}
    {#        url:"/ajaxdemo/file_put/",#}
    {#        type:"post",#}
    {#        contentType:"application/json",#}
    {#        data:JSON.stringify({#}
    {#            a:1,#}
    {#            c:3,#}
    {#            b:2#}
    {#        }),#}
    {#        success:function (data) {#}
    {##}
    {#        }#}
    {#    });#}
    {#);#}
    // ajax 上传文件
    $(".btn").click(function () {

        var formdata = new FormData();
        formdata.append("user", $("#user").val());
        formdata.append("avatar", $("#avatar")[0].files[0]);

        $.ajax({
            url:"/ajaxdemo/file_put/",
            type:"post",
            contentType:false,  // 不做编码
            processData:false, // 不做预处理
            data:formdata,
            success:function (data) {

            }
        });
    });
</script>

</body>
</html>